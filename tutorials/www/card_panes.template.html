<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License,
Version 2.0 (the "License"); you may not use this file except in
compliance with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html>
<head>
<title>Card Panes</title>
<link rel="stylesheet" href="tutorial.css">
<script src="http://java.com/js/deployJava.js"></script>

<!-- NOTE: Syntax highlighting script is LGPL -->
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"></script>
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js"></script>
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js"></script>
<link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css"/>
<script type="text/javascript">
    SyntaxHighlighter.all();
</script>
</head>
<body>
<h1>Card Panes</h1>

<p>Card panes are the most basic of the navigation components. They present a simple "card stack" of components, only one of which is visible at a time.</p>

<p>Unlike the other navigation components, card panes don't include any chrome or intrinsic means of navigation - all selection management must be performed programmatically by the caller. While this imposes more responsibility on the developer, it is also the most flexible, giving the developer complete control over the navigation experience.</p>

<p>By default, the preferred size of a card pane is the maximum of the preferred widths and heights of the cards, and each card is sized to fill the entire space. However, card panes can also dynamically resize to match the preferred size of the currently selected card. Additionally, a transition effect can be applied to the selection change event, providing a more visually engaging experience when navigating between cards. Currently, <tt>CardPane</tt> supports the following transition effects, and more may be added in the future:</p>

<ul>
<li>Crossfade</li>
<li>Horizontal slide ("wipe" left/right)</li>
<li>Vertical slide ("wipe" up/down)</li>
<li>Flip</li>
</ul>

<p>The following application demonstrates the behavior of <tt>CardPane</tt>:</p>

<script>
var attributes = {code:"org.apache.pivot.wtk.BrowserApplicationContext$HostApplet",
    archive:"lib/@project_name@-core-@version@.jar,lib/@project_name@-wtk-@version@.jar,lib/@project_name@-wtk-@version@.terra.jar,lib/@project_name@-tutorials-@version@.jar",
    width:640,
    height:480
};
var parameters = {application_class_name:"org.apache.pivot.tutorials.navigation.CardPanes",
    codebase_lookup:false
};
deployJava.writeAppletTag(attributes, parameters);
</script>

<p>The WTKX source for the application is shown below. A set of buttons is provided to allow the user to control the styles that affect the card pane's presentation; specifically, "sizeToSelection" and "selectionChangeEffect". The card pane itself is contained within a <tt>FlowPane</tt> so that its response to changes in these styles is visible:</p>

<pre class="brush:xml">
&lt;Window title="Card Panes" maximized="true"
    xmlns:wtkx="http://pivot.apache.org/wtkx"
    xmlns="org.apache.pivot.wtk"&gt;
    &lt;content&gt;
        &lt;TablePane styles="{padding:8, horizontalSpacing:6}"&gt;
            &lt;columns&gt;
                &lt;TablePane.Column width="1*"/&gt;
                &lt;TablePane.Column/&gt;
            &lt;/columns&gt;
            &lt;rows&gt;
                &lt;TablePane.Row height="1*"&gt;
                    &lt;Border styles="{padding:12}"&gt;
                        &lt;content&gt;
                            &lt;TablePane styles="{verticalSpacing:6}"&gt;
                                &lt;columns&gt;
                                    &lt;TablePane.Column width="1*"/&gt;
                                &lt;/columns&gt;
                                &lt;rows&gt;
                                    &lt;TablePane.Row height="1*"&gt;
                                        &lt;BoxPane styles="{horizontalAlignment:'center', verticalAlignment:'center',
                                            backgroundColor:'#cccccc'}"&gt;
                                            &lt;Border styles="{padding:6}"&gt;
                                                &lt;content&gt;
                                                    &lt;CardPane wtkx:id="cardPane"&gt;
                                                        &lt;ImageView image="org/apache/pivot/tutorials/IMG_0725_2.jpg"/&gt;
                                                        &lt;ImageView image="org/apache/pivot/tutorials/IMG_0735_2.jpg"/&gt;
                                                        &lt;ImageView image="org/apache/pivot/tutorials/IMG_0767_2.jpg"/&gt;
                                                    &lt;/CardPane&gt;
                                                &lt;/content&gt;
                                            &lt;/Border&gt;
                                        &lt;/BoxPane&gt;
                                    &lt;/TablePane.Row&gt;
                                    &lt;TablePane.Row&gt;
                                        &lt;Separator/&gt;
                                    &lt;/TablePane.Row&gt;
                                    &lt;TablePane.Row&gt;
                                        &lt;BoxPane styles="{horizontalAlignment:'center'}"&gt;
                                            &lt;LinkButton wtkx:id="previousButton" buttonData="Previous"/&gt;
                                            &lt;LinkButton wtkx:id="nextButton" buttonData="Next"/&gt;
                                        &lt;/BoxPane&gt;
                                    &lt;/TablePane.Row&gt;
                                &lt;/rows&gt;
                            &lt;/TablePane&gt;
                        &lt;/content&gt;
                    &lt;/Border&gt;

                    &lt;Border&gt;
                        &lt;content&gt;
                            &lt;BoxPane orientation="vertical" styles="{padding:4, spacing:6}"&gt;
                                &lt;Checkbox wtkx:id="sizeToSelectionCheckbox" buttonData="Size to selection"/&gt;
                                &lt;Label text="Selection change effect:"/&gt;
                                &lt;RadioButton wtkx:id="crossfadeRadioButton" buttonData="Crossfade" selected="true"
                                    group="selectionChangeEffect"/&gt;
                                &lt;RadioButton wtkx:id="horizontalSlideRadioButton" buttonData="Horizontal Slide"
                                    group="selectionChangeEffect"/&gt;
                                &lt;RadioButton wtkx:id="verticalSlideRadioButton" buttonData="Vertical Slide"
                                    group="selectionChangeEffect"/&gt;
                                &lt;RadioButton wtkx:id="flipRadioButton" buttonData="Flip"
                                    group="selectionChangeEffect"/&gt;
                                &lt;RadioButton wtkx:id="noneRadioButton" buttonData="None"
                                    group="selectionChangeEffect"/&gt;
                            &lt;/BoxPane&gt;
                        &lt;/content&gt;
                    &lt;/Border&gt;
                &lt;/TablePane.Row&gt;
            &lt;/rows&gt;
        &lt;/TablePane&gt;
    &lt;/content&gt;
&lt;/Window&gt;
</pre>

<p>The Java source is as follows. The <tt>updateCardPane()</tt> method applies the appropriate styles to the card pane based on the button state:</p>

<pre class="brush:java">
package org.apache.pivot.tutorials.navigation;

import org.apache.pivot.collections.Map;
import org.apache.pivot.wtk.Application;
import org.apache.pivot.wtk.Button;
import org.apache.pivot.wtk.ButtonPressListener;
import org.apache.pivot.wtk.ButtonStateListener;
import org.apache.pivot.wtk.CardPane;
import org.apache.pivot.wtk.CardPaneListener;
import org.apache.pivot.wtk.Checkbox;
import org.apache.pivot.wtk.DesktopApplicationContext;
import org.apache.pivot.wtk.Display;
import org.apache.pivot.wtk.LinkButton;
import org.apache.pivot.wtk.RadioButton;
import org.apache.pivot.wtk.Window;
import org.apache.pivot.wtk.skin.CardPaneSkin;
import org.apache.pivot.wtkx.WTKXSerializer;

public class CardPanes implements Application {
    private Window window = null;
    private CardPane cardPane = null;
    private LinkButton previousButton = null;
    private LinkButton nextButton = null;
    private Checkbox sizeToSelectionCheckbox = null;
    private RadioButton crossfadeRadioButton = null;
    private RadioButton horizontalSlideRadioButton = null;
    private RadioButton verticalSlideRadioButton = null;
    private RadioButton flipRadioButton = null;
    private RadioButton noneRadioButton = null;

    public void startup(Display display, Map&lt;String, String&gt; properties)
        throws Exception {
        WTKXSerializer wtkxSerializer = new WTKXSerializer();
        window = (Window)wtkxSerializer.readObject(this, "card_panes.wtkx");
        cardPane = (CardPane)wtkxSerializer.get("cardPane");
        previousButton = (LinkButton)wtkxSerializer.get("previousButton");
        nextButton = (LinkButton)wtkxSerializer.get("nextButton");
        sizeToSelectionCheckbox = (Checkbox)wtkxSerializer.get("sizeToSelectionCheckbox");
        crossfadeRadioButton = (RadioButton)wtkxSerializer.get("crossfadeRadioButton");
        horizontalSlideRadioButton = (RadioButton)wtkxSerializer.get("horizontalSlideRadioButton");
        verticalSlideRadioButton = (RadioButton)wtkxSerializer.get("verticalSlideRadioButton");
        flipRadioButton = (RadioButton)wtkxSerializer.get("flipRadioButton");
        noneRadioButton = (RadioButton)wtkxSerializer.get("noneRadioButton");

        cardPane.getCardPaneListeners().add(new CardPaneListener.Adapter() {
            public void selectedIndexChanged(CardPane cardPane, int previousSelectedIndex) {
                updateLinkButtonState();
            }
        });

        previousButton.getButtonPressListeners().add(new ButtonPressListener() {
            public void buttonPressed(Button button) {
                cardPane.setSelectedIndex(cardPane.getSelectedIndex() - 1);
            }
        });

        nextButton.getButtonPressListeners().add(new ButtonPressListener() {
            public void buttonPressed(Button button) {
                cardPane.setSelectedIndex(cardPane.getSelectedIndex() + 1);
            }
        });

        ButtonStateListener checkboxStateListener = new ButtonStateListener() {
            public void stateChanged(Button button, Button.State previousState) {
                updateCardPane();
            }
        };

        sizeToSelectionCheckbox.getButtonStateListeners().add(checkboxStateListener);

        ButtonStateListener radioButtonStateListener = new ButtonStateListener() {
            public void stateChanged(Button button, Button.State previousState) {
                if (button.isSelected()) {
                    updateCardPane();
                }
            }
        };

        crossfadeRadioButton.getButtonStateListeners().add(radioButtonStateListener);
        horizontalSlideRadioButton.getButtonStateListeners().add(radioButtonStateListener);
        verticalSlideRadioButton.getButtonStateListeners().add(radioButtonStateListener);
        flipRadioButton.getButtonStateListeners().add(radioButtonStateListener);
        noneRadioButton.getButtonStateListeners().add(radioButtonStateListener);

        updateCardPane();
        updateLinkButtonState();

        window.open(display);
    }

    public boolean shutdown(boolean optional) {
        if (window != null) {
            window.close();
        }

        return false;
    }

    public void suspend() {
    }

    public void resume() {
    }

    private void updateCardPane() {
        cardPane.getStyles().put("sizeToSelection", sizeToSelectionCheckbox.isSelected());

        if (crossfadeRadioButton.isSelected()) {
            cardPane.getStyles().put("selectionChangeEffect",
                CardPaneSkin.SelectionChangeEffect.CROSSFADE);
        } else if (horizontalSlideRadioButton.isSelected()) {
            cardPane.getStyles().put("selectionChangeEffect",
                CardPaneSkin.SelectionChangeEffect.HORIZONTAL_SLIDE);
        } else if (verticalSlideRadioButton.isSelected()) {
            cardPane.getStyles().put("selectionChangeEffect",
                CardPaneSkin.SelectionChangeEffect.VERTICAL_SLIDE);
        } else if (flipRadioButton.isSelected()) {
            cardPane.getStyles().put("selectionChangeEffect",
                CardPaneSkin.SelectionChangeEffect.FLIP);
        } else {
            cardPane.getStyles().put("selectionChangeEffect", null);
        }
    }

    private void updateLinkButtonState() {
        int selectedIndex = cardPane.getSelectedIndex();
        previousButton.setEnabled(selectedIndex > 0);
        nextButton.setEnabled(selectedIndex &lt; cardPane.getLength() - 1);
    }

    public static void main(String[] args) {
        DesktopApplicationContext.main(CardPanes.class, args);
    }
}
</pre>

<p>Next: <a href="tab_panes.html">Tab Panes</a></p>
</body>
</html>
