<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License,
Version 2.0 (the "License"); you may not use this file except in
compliance with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html>
<head>
<title>Forms</title>
<link rel="stylesheet" href="tutorial.css">
<script src="http://java.com/js/deployJava.js"></script>

<!-- NOTE: Syntax highlighting script is LGPL -->
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"></script>
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js"></script>
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js"></script>
<link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css"/>
<script type="text/javascript">
    SyntaxHighlighter.all();
</script>
</head>
<body>
<h1>Forms</h1>

<p>Forms are often used to collect related pieces of information from a user. For example, an application that manages a user's music collection might provide a form that allows the user to enter such information as song title, artist, and album name, and a content management system might provide a form that allows a user to specify the title, author, and publication date of an article.</p>

<p>Form contents are commonly organized into sections, to make it easier for the user to read. A contact management application might use a form such as the one shown below to collect information about the user's contacts. The form is divided into four sections, one for each aspect of the contact record: name, addresses, phone numbers, and email addresses. Note the use of the <tt>&lt;Form.Section&gt;</tt> elements to define the sections; the <tt>Form</tt>'s skin automatically inserts <a href="separators.html">separators</a> to visually partition the section content and uses the <tt>Form.Section</tt> heading as the <tt>Separator</tt> heading:</p>

<script>
var attributes = {code:"org.apache.pivot.wtk.BrowserApplicationContext$HostApplet",
    archive:"lib/@project_name@-core-@version@.jar,lib/@project_name@-wtk-@version@.jar,lib/@project_name@-wtk-@version@.terra.jar,lib/@project_name@-tutorials-@version@.jar",
    width:512,
    height:384
};
var parameters = {application_class_name:"org.apache.pivot.tutorials.layout.Forms",
    codebase_lookup:false
};
deployJava.writeAppletTag(attributes, parameters);
</script>

<p>The WTKX for this example is shown below:</p>

<pre class="brush:xml">
&lt;Window title="Forms" maximized="true"
    xmlns:wtkx="http://pivot.apache.org/wtkx"
    xmlns="org.apache.pivot.wtk"&gt;
    &lt;content&gt;
        &lt;Border styles="{padding:6}"&gt;
            &lt;content&gt;
                &lt;TablePane&gt;
                    &lt;columns&gt;
                        &lt;TablePane.Column width="1*"/&gt;
                    &lt;/columns&gt;
                    &lt;rows&gt;
                        &lt;TablePane.Row height="1*"&gt;
                            &lt;Form styles="{rightAlignLabels:true}"&gt;
                                &lt;sections&gt;
                                    &lt;Form.Section&gt;
                                        &lt;BoxPane wtkx:id="nameBoxPane" Form.name="Name"&gt;
                                            &lt;TextInput wtkx:id="lastNameTextInput" prompt="Last"/&gt;
                                            &lt;TextInput wtkx:id="firstNameTextInput" prompt="First"/&gt;
                                        &lt;/BoxPane&gt;
                                    &lt;/Form.Section&gt;
                                    &lt;Form.Section heading="Addresses"&gt;
                                        &lt;BoxPane Form.name="Home" orientation="vertical"&gt;
                                            &lt;TextInput prompt="Street" textSize="24"/&gt;
                                            &lt;BoxPane&gt;
                                                &lt;TextInput prompt="City"/&gt;
                                                &lt;TextInput prompt="State" textSize="6"/&gt;
                                                &lt;TextInput prompt="Zip" textSize="10"/&gt;
                                            &lt;/BoxPane&gt;
                                        &lt;/BoxPane&gt;
                                        &lt;BoxPane Form.name="Work" orientation="vertical"&gt;
                                            &lt;TextInput prompt="Street" textSize="24"/&gt;
                                            &lt;BoxPane&gt;
                                                &lt;TextInput prompt="City"/&gt;
                                                &lt;TextInput prompt="State" textSize="6"/&gt;
                                                &lt;TextInput prompt="Zip" textSize="10"/&gt;
                                            &lt;/BoxPane&gt;
                                        &lt;/BoxPane&gt;
                                    &lt;/Form.Section&gt;
                                    &lt;Form.Section heading="Phone Numbers"&gt;
                                        &lt;TextInput Form.name="Home"/&gt;
                                        &lt;TextInput Form.name="Work"/&gt;
                                    &lt;/Form.Section&gt;
                                    &lt;Form.Section heading="Email Addresses"&gt;
                                        &lt;TextInput Form.name="Home"/&gt;
                                        &lt;TextInput Form.name="Work"/&gt;
                                    &lt;/Form.Section&gt;
                                &lt;/sections&gt;
                            &lt;/Form&gt;
                        &lt;/TablePane.Row&gt;
                        &lt;TablePane.Row height="-1"&gt;
                            &lt;Separator/&gt;
                        &lt;/TablePane.Row&gt;
                        &lt;TablePane.Row height="-1"&gt;
                            &lt;TablePane&gt;
                                &lt;columns&gt;
                                    &lt;TablePane.Column width="1*"/&gt;
                                    &lt;TablePane.Column width="-1"/&gt;
                                &lt;/columns&gt;
                                &lt;rows&gt;
                                    &lt;TablePane.Row&gt;
                                        &lt;BoxPane styles="{verticalAlignment:'center'}"&gt;
                                            &lt;Label wtkx:id="errorLabel" styles="{color:'#ff0000'}"/&gt;
                                        &lt;/BoxPane&gt;
                                        &lt;BoxPane styles="{horizontalAlignment:'right', verticalAlignment:'center'}"&gt;
                                            &lt;PushButton wtkx:id="submitButton" buttonData="Submit"
                                                styles="{preferredAspectRatio:3}"/&gt;
                                        &lt;/BoxPane&gt;
                                    &lt;/TablePane.Row&gt;
                                &lt;/rows&gt;
                            &lt;/TablePane&gt;
                        &lt;/TablePane.Row&gt;
                    &lt;/rows&gt;
                &lt;/TablePane&gt;
            &lt;/content&gt;
        &lt;/Border&gt;
    &lt;/content&gt;
&lt;/Window&gt;
</pre>

<p>Also note the use of the "Form.name" attribute - this is an example of an "attached property", also called an "attribute" in WTK. An attribute is a property that can be specified on a component only when it is a child of the container that defines the property. The same result can be achieved programmatically by calling the static <tt>Form.setName()</tt> method on a component after it has been added to the form. Several other containers, including <tt>TabPane</tt> and <tt>TablePane</tt>, define similar attributes.</p>

<p>Note also that section components are not required to be typical form elements such as <tt>TextInput</tt> or <tt>PushButton</tt>. They can also be containers, allowing the arrangement of components within a section to be customized.</p>

<h2>Form Validation</h2>
<p>Pressing the "Submit" button performs some simple validation on the name fields, ensuring that the user has provided some text in each field. If either field is empty, an error message is displayed at the bottom of the form, and the row containing the text fields is highlighted with a red flag. This demonstrates the use of another <tt>Form</tt> attribute: the flag. A flag is an instance of <tt>Form.Flag</tt> that allows a user to tag a form element as requiring attention from the user. It is a simple class that contains a message type (error, warning, info, etc.) and a message. Mousing over the flag displays a tooltip containing the message.</p>

<p>The button press handler in the code sample below shows how a flag is set on the name fields:</p>

<pre class="brush:java">
package org.apache.pivot.tutorials.layout;

import org.apache.pivot.collections.Map;
import org.apache.pivot.wtk.Application;
import org.apache.pivot.wtk.Button;
import org.apache.pivot.wtk.ButtonPressListener;
import org.apache.pivot.wtk.DesktopApplicationContext;
import org.apache.pivot.wtk.Display;
import org.apache.pivot.wtk.BoxPane;
import org.apache.pivot.wtk.Form;
import org.apache.pivot.wtk.Label;
import org.apache.pivot.wtk.MessageType;
import org.apache.pivot.wtk.Prompt;
import org.apache.pivot.wtk.PushButton;
import org.apache.pivot.wtk.TextInput;
import org.apache.pivot.wtk.Window;
import org.apache.pivot.wtkx.WTKXSerializer;

public class Forms implements Application {
    private Window window = null;
    private BoxPane nameBoxPane = null;
    private TextInput lastNameTextInput = null;
    private TextInput firstNameTextInput = null;
    private PushButton submitButton = null;
    private Label errorLabel = null;

    public void startup(Display display, Map&lt;String, String&gt; properties) throws Exception {
        WTKXSerializer wtkxSerializer = new WTKXSerializer();
        window = (Window)wtkxSerializer.readObject(this, "forms.wtkx");
        nameBoxPane = (BoxPane)wtkxSerializer.get("nameBoxPane");
        lastNameTextInput = (TextInput)wtkxSerializer.get("lastNameTextInput");
        firstNameTextInput = (TextInput)wtkxSerializer.get("firstNameTextInput");
        submitButton = (PushButton)wtkxSerializer.get("submitButton");
        errorLabel = (Label)wtkxSerializer.get("errorLabel");

        submitButton.getButtonPressListeners().add(new ButtonPressListener() {
            public void buttonPressed(Button button) {
                String lastName = lastNameTextInput.getText();
                String firstName = firstNameTextInput.getText();

                Form.Flag flag = null;
                if (lastName.length() == 0
                    || firstName.length() == 0) {
                    flag = new Form.Flag(MessageType.ERROR, "Name is required.");
                }

                Form.setFlag(nameBoxPane, flag);

                if (flag == null) {
                    errorLabel.setText(null);
                    Prompt.prompt("Pretending to submit...", window);
                } else {
                    errorLabel.setText("Some required information is missing.");
                }
            }
        });

        window.open(display);
    }

    public boolean shutdown(boolean optional) {
        if (window != null) {
            window.close();
        }

        return false;
    }

    public void suspend() {
    }

    public void resume() {
    }

    public static void main(String[] args) {
        DesktopApplicationContext.main(Forms.class, args);
    }
}
</pre>

<p>Next: <a href="panels.html">Panels</a></p>
</body>
</html>
